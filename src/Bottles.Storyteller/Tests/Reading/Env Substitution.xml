<?xml version="1.0"?>
<Test name="Environment Substitution" lifecycle="Regression">
  <Comment><![CDATA[Ensures that the environment settings can be substituted in later settings using the {key} syntax]]></Comment>
  <Deployment>
    <Configure isStep="True">
      <DeploymentConfiguration>
        <ProfileRecipes isStep="True" profile="Subs" recipeNames="Console" />
        <EnvironmentSettings isStep="True">
          <table>
            <row isStep="True" Key="Name" Value="Bob" />
          </table>
        </EnvironmentSettings>
        <HostValues isStep="True">
          <table>
            <row isStep="True" Recipe="Console" Host="ConsoleHost" Key="Command" Value="Ping{Name}" />
          </table>
        </HostValues>
      </DeploymentConfiguration>
    </Configure>
    <Options isStep="True">
      <DeploymentOptions>
        <ProfileIs isStep="True" profile="Subs" />
      </DeploymentOptions>
    </Options>
    <ReadingProfile isStep="True">
      <ProfileReader>
        <FetchPropertiesForHost isStep="True" host="ConsoleHost" />
        <CheckPropertiesForHost isStep="True">
          <rows>
            <row isStep="True" Key="Command" Value="PingBob" Provenance="storyteller\recipes\Console\ConsoleHost.host" />
          </rows>
        </CheckPropertiesForHost>
      </ProfileReader>
    </ReadingProfile>
  </Deployment>
</Test>